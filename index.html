<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Keerti ‚ù§Ô∏è</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Great+Vibes&family=Montserrat:wght@300;500;700&family=Playfair+Display:ital@0;1&display=swap');

        /* --- GLOBAL & RESET --- */
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: #0f0c29;
            background: linear-gradient(to bottom, #0f0c29, #302b63, #24243e);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #fff;
            font-family: 'Montserrat', sans-serif;
            perspective: 1500px;
            /* Stronger perspective for 3D */
        }

        /* --- CANVAS LAYERS --- */
        #starfield {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        #fireworks {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
            /* On top of logic, below text if needed */
            pointer-events: none;
        }

        /* --- MAIN CONTAINER --- */
        .container {
            position: relative;
            z-index: 10;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* --- PAGES --- */
        .page {
            position: absolute;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            width: 100%;
            height: 100%;
            opacity: 0;
            pointer-events: none;
            transition: opacity 1s ease-in-out, transform 1s cubic-bezier(0.22, 1, 0.36, 1);
        }

        .page.active {
            opacity: 1;
            pointer-events: all;
            transform: scale(1);
        }

        .page.exit {
            opacity: 0;
            transform: scale(1.1) translateY(-20px);
            pointer-events: none;
        }

        /* --- 3D ENVELOPE (Impressive Intro) --- */
        .envelope-wrapper {
            position: relative;
            width: 300px;
            height: 200px;
            cursor: pointer;
            transition: transform 0.5s;
        }

        .envelope-wrapper:hover {
            transform: scale(1.05);
            /* Gentle hover zoom */
        }

        .envelope {
            position: relative;
            width: 100%;
            height: 100%;
            background: #c0392b;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
            z-index: 5;
            transition: transform 1s ease;
        }

        .lid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100px;
            /* Half height */
            background: #e74c3c;
            clip-path: polygon(0 0, 100% 0, 50% 100%);
            transform-origin: top;
            transition: transform 0.8s 0.2s ease-in-out;
            z-index: 6;
        }

        .flap-left,
        .flap-right {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 100%;
            background: #c0392b;
            z-index: 5;
        }

        .flap-left {
            clip-path: polygon(0 0, 50% 50%, 0 100%);
            background: #a93226;
        }

        .flap-right {
            clip-path: polygon(100% 0, 50% 50%, 100% 100%);
            background: #a93226;
        }

        .bottom-pocket {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #922b21;
            clip-path: polygon(0 100%, 50% 50%, 100% 100%);
            z-index: 6;
        }

        .letter {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            height: 90%;
            background: #fff;
            border-radius: 5px;
            z-index: 4;
            transition: transform 0.8s ease-in-out;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.1);
        }

        .letter-content {
            font-family: 'Great Vibes', cursive;
            color: #c0392b;
            font-size: 2rem;
        }

        /* Open State for Envelope */
        .envelope-wrapper.open .lid {
            transform: rotateX(180deg);
        }

        .envelope-wrapper.open .letter {
            transform: translateX(-50%) translateY(-120px) scale(1.1);
            z-index: 7;
            /* Bring letter above everything */
        }

        .envelope-wrapper.open .envelope {
            transform: translateY(100px) scale(0.8);
            opacity: 0;
            transition-delay: 1s;
            /* Fade out envelope after letter extracts */
        }

        /* --- TYPOGRAPHY --- */
        h1 {
            font-family: 'Great Vibes', cursive;
            font-size: 6rem;
            margin: 0;
            background: linear-gradient(45deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 20px rgba(255, 154, 158, 0.4);
            animation: floatText 4s ease-in-out infinite;
        }

        h2 {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            color: #fff;
            margin-bottom: 2rem;
        }

        p {
            font-size: 1.5rem;
            line-height: 1.8;
            max-width: 700px;
            color: #e0e0e0;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        .highlight {
            color: #ff6b81;
            font-weight: bold;
            font-style: italic;
            text-shadow: 0 0 10px rgba(255, 107, 129, 0.6);
        }

        /* --- BUTTONS (Cinematic) --- */
        .btn {
            margin-top: 3rem;
            padding: 15px 40px;
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: #fff;
            font-family: 'Montserrat', sans-serif;
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 3px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all 0.4s ease;
            backdrop-filter: blur(5px);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: #fff;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
        }

        /* --- COUNTDOWN (Big & Thin) --- */
        .big-count {
            font-family: 'Playfair Display', serif;
            font-size: 10rem;
            font-weight: 700;
            background: linear-gradient(to bottom, #fff, #999);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.5));
        }

        @keyframes floatText {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        /* --- FADE IN UTILS --- */
        .fade-in-up {
            animation: fadeInUp 1.5s ease forwards;
            opacity: 0;
            transform: translateY(30px);
        }

        .delay-1 {
            animation-delay: 0.5s;
        }

        .delay-2 {
            animation-delay: 1.5s;
        }

        .delay-3 {
            animation-delay: 2.5s;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* --- GIANT HEART --- */
        .giant-heart {
            font-size: 8rem;
            margin: 20px 0;
            animation: hugeBeat 1.5s infinite cubic-bezier(0.215, 0.61, 0.355, 1);
            filter: drop-shadow(0 0 20px rgba(255, 0, 50, 0.6));
        }

        @keyframes hugeBeat {
            0% {
                transform: scale(1);
            }

            14% {
                transform: scale(1.3);
            }

            28% {
                transform: scale(1);
            }

            42% {
                transform: scale(1.3);
            }

            70% {
                transform: scale(1);
            }
        }
    </style>
</head>

<body>

    <canvas id="starfield"></canvas>
    <canvas id="fireworks"></canvas>

    <div class="container">

        <!-- PAGE 1: ENVELOPE SURPRISE -->
        <div class="page active" id="page-1">
            <h2 style="font-size: 1.5rem; letter-spacing: 4px; opacity: 0.8; margin-bottom: 50px;">A SPECIAL DELIVERY
                FOR KEERTI</h2>

            <div class="envelope-wrapper" onclick="openEnvelope()" id="envelope">
                <div class="envelope">
                    <div class="lid"></div>
                    <div class="flap-left"></div>
                    <div class="flap-right"></div>
                    <div class="bottom-pocket"></div>
                    <div class="letter">
                        <div class="letter-content">Open Me</div>
                    </div>
                </div>
            </div>

            <p style="margin-top: 50px; font-size: 0.9rem; opacity: 0.5;">(Tap the envelope)</p>
        </div>

        <!-- PAGE 2: CINEMATIC LOVE NOTE -->
        <div class="page" id="page-2">
            <h2 class="fade-in-up">Keerti...</h2>
            <p class="fade-in-up delay-1">
                They say magic doesn't exist... <br>
                But then, how do you explain the way the world stops <br>
                every time you <span class="highlight">smile</span>?
            </p>
            <p class="fade-in-up delay-2"
                style="font-size: 1.2rem; max-width: 600px; margin-top: 2rem; font-style: italic; color: #ff9a9e;">
                "You are the poem I never knew how to write,<br>and this life is sweeter music because you are in it."
            </p>
            <button class="btn fade-in-up delay-3" onclick="nextPage(2)">Continue Journey</button>
        </div>

        <!-- PAGE 3: ANTICIPATION -->
        <div class="page" id="page-3">
            <h2 class="fade-in-up">Are You Ready?</h2>
            <p class="fade-in-up delay-1">
                The clock is ticking... <br>
                A new chapter waits for us. <br>
                Together.
            </p>
            <button class="btn fade-in-up delay-2" onclick="nextPage(3)">Begin Countdown</button>
        </div>

        <!-- PAGE 4: 10 SECOND COUNTDOWN -->
        <div class="page" id="page-4">
            <div class="big-count" id="countdown-number">10</div>
            <p style="letter-spacing: 5px; text-transform: uppercase; margin-top: 20px;">Seconds Remaining</p>
        </div>

        <!-- PAGE 5: GRAND FINALE -->
        <div class="page" id="page-5">
            <h1>Happy New Year<br>Keertichinnu!</h1>

            <div class="giant-heart">‚ù§Ô∏è</div>

            <p class="fade-in-up delay-1"
                style="font-size: 2rem; margin-top: 1rem; font-family: 'Great Vibes', cursive;">
                With Huge Love, <br>
                <span class="highlight" style="font-size: 3rem;">Forever</span>
            </p>
        </div>

    </div>

    <script>
        // --- STARFIELD BACKGROUND (Interactive) ---
        const starCanvas = document.getElementById('starfield');
        const starCtx = starCanvas.getContext('2d');
        let width, height;
        let stars = [];
        const mouse = { x: null, y: null };

        function initStars() {
            width = starCanvas.width = window.innerWidth;
            height = starCanvas.height = window.innerHeight;
            stars = [];
            for (let i = 0; i < 150; i++) {
                stars.push({
                    x: Math.random() * width,
                    y: Math.random() * height,
                    size: Math.random() * 2,
                    speedX: (Math.random() - 0.5) * 0.5,
                    speedY: (Math.random() - 0.5) * 0.5
                });
            }
        }

        window.addEventListener('resize', () => {
            initStars();
            resizeFireworks();
        });
        window.addEventListener('mousemove', (e) => {
            mouse.x = e.x;
            mouse.y = e.y;
        });

        function animateStars() {
            starCtx.clearRect(0, 0, width, height);
            starCtx.fillStyle = '#fff';

            // Draw Stars
            stars.forEach(star => {
                starCtx.beginPath();
                starCtx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
                starCtx.fill();

                // Move Star
                star.x += star.speedX;
                star.y += star.speedY;

                // Wrap around screen
                if (star.x < 0) star.x = width;
                if (star.x > width) star.x = 0;
                if (star.y < 0) star.y = height;
                if (star.y > height) star.y = 0;

                // Connect to mouse if close (Interactivity)
                if (mouse.x) {
                    const dx = mouse.x - star.x;
                    const dy = mouse.y - star.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    if (distance < 120) {
                        starCtx.strokeStyle = `rgba(255, 255, 255, ${1 - distance / 120})`;
                        starCtx.lineWidth = 0.5;
                        starCtx.beginPath();
                        starCtx.moveTo(star.x, star.y);
                        starCtx.lineTo(mouse.x, mouse.y);
                        starCtx.stroke();
                    }
                }
            });
            requestAnimationFrame(animateStars);
        }

        initStars();
        animateStars();

        // --- ENVELOPE LOGIC ---
        function openEnvelope() {
            const envelope = document.getElementById('envelope');
            envelope.classList.add('open');

            // Wait for animation to finish then go to next page
            setTimeout(() => {
                nextPage(1);
            }, 1800);
        }

        // --- PAGE NAVIGATION ---
        function nextPage(currentNum) {
            const current = document.getElementById(`page-${currentNum}`);
            const next = document.getElementById(`page-${currentNum + 1}`);

            if (current) current.classList.remove('active');
            if (current) current.classList.add('exit');

            if (next) {
                // Remove exit class if it was there from a reset (not applicable here but good practice)
                next.classList.remove('exit');
                next.classList.add('active');

                // Trigger Timer if Page 4
                if (next.id === 'page-4') startTimer();

                // Trigger Fireworks if Page 5
                if (next.id === 'page-5') {
                    fireworksActive = true;
                    document.title = "Happy New Year Keerti! üéâ";
                }
            }
        }

        // --- TIMER ---
        function startTimer() {
            let timeLeft = 10;
            const el = document.getElementById('countdown-number');
            const timer = setInterval(() => {
                timeLeft--;
                el.innerText = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    nextPage(4);
                }
            }, 1000);
        }

        // --- FIREWORKS SYSTEM (Advanced) ---
        const fwCanvas = document.getElementById('fireworks');
        const fwCtx = fwCanvas.getContext('2d');
        let fwWidth, fwHeight;
        let particles = [];
        let fireworksActive = false;

        function resizeFireworks() {
            fwWidth = fwCanvas.width = window.innerWidth;
            fwHeight = fwCanvas.height = window.innerHeight;
        }
        resizeFireworks();

        class Particle {
            constructor(x, y, hue) {
                this.x = x;
                this.y = y;
                this.hue = hue;
                this.destX = (Math.random() - 0.5) * 100 + x;
                this.destY = (Math.random() - 0.5) * 100 + y;
                const angle = Math.random() * Math.PI * 2;
                const speed = Math.random() * 5 + 2;
                this.vx = Math.cos(angle) * speed;
                this.vy = Math.sin(angle) * speed;
                this.alpha = 1;
                this.decay = Math.random() * 0.015 + 0.01;
                this.gravity = 0.05;
            }
            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.vy += this.gravity;
                this.alpha -= this.decay;
            }
            draw() {
                fwCtx.save();
                fwCtx.globalAlpha = this.alpha;
                fwCtx.fillStyle = `hsl(${this.hue}, 100%, 60%)`;
                fwCtx.beginPath();
                fwCtx.arc(this.x, this.y, 2, 0, Math.PI * 2);
                fwCtx.fill();
                fwCtx.restore();
            }
        }

        function launchFirework() {
            if (!fireworksActive) return;
            const x = Math.random() * fwWidth;
            const y = Math.random() * (fwHeight * 0.5);
            const hue = Math.random() * 360;
            for (let i = 0; i < 60; i++) {
                particles.push(new Particle(x, y, hue));
            }
        }

        function animateFireworks() {
            // Clear trail
            fwCtx.globalCompositeOperation = 'destination-out';
            fwCtx.fillStyle = 'rgba(0, 0, 0, 0.2)';
            fwCtx.fillRect(0, 0, fwWidth, fwHeight);

            fwCtx.globalCompositeOperation = 'lighter';

            if (fireworksActive && Math.random() < 0.1) {
                launchFirework();
            }

            for (let i = particles.length - 1; i >= 0; i--) {
                particles[i].update();
                particles[i].draw();
                if (particles[i].alpha <= 0) particles.splice(i, 1);
            }
            requestAnimationFrame(animateFireworks);
        }
        animateFireworks();

    </script>
</body>

</html>